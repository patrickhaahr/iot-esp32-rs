# Plain MQTT (local testing only)
listener 1883 localhost

# Plain MQTT (network - for ESP32 testing without TLS)
listener 1884 0.0.0.0

# MQTTS (TLS)
listener 8883 0.0.0.0
cafile /mosquitto/certs/ca.crt
certfile /mosquitto/certs/server.crt
keyfile /mosquitto/certs/server.key
require_certificate false
# Force TLS 1.2 to work around embedded-tls DecodeError with TLS 1.3
# embedded-tls has parsing issues with Mosquitto's TLS 1.3 handshake
# TLS 1.2 should have better compatibility
tls_version tlsv1.2
use_username_as_clientid false

# Authentication
allow_anonymous false
password_file /mosquitto/config/passwd

persistence true
persistence_location /mosquitto/data/
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout
